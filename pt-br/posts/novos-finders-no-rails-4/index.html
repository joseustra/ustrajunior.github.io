<!doctype html><html lang=pt-br><head><meta charset=utf-8><meta name=generator content="Hugo 0.81.0"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:title content="Novos finders no rails 4 - Jose Ustra"><meta name=twitter:description content="Com a entrada do Rails 4 alguns m√©todos mudaram. O m√©todos &amp;lsquo;m√°gicos&amp;rsquo; que a gente conhecia como find_all_by_name foram marcados como deprecated e ser√£o removidos no Rails 4.1"><meta name=twitter:site content="https://ustrajunior.com/"><meta name=twitter:creator content><meta name=twitter:image content="https://ustrajunior.com/images/avatar.jpg"><meta property="og:locale" content="pt-br"><meta property="og:type" content="article"><meta property="og:title" content="Novos finders no rails 4 - Jose Ustra"><meta property="og:description" content="Com a entrada do Rails 4 alguns m√©todos mudaram. O m√©todos &amp;lsquo;m√°gicos&amp;rsquo; que a gente conhecia como find_all_by_name foram marcados como deprecated e ser√£o removidos no Rails 4.1"><meta property="og:url" content="https://ustrajunior.com/pt-br/posts/novos-finders-no-rails-4/"><meta property="og:site_name" content="Jose Ustra"><meta property="og:image" content="https://ustrajunior.com/images/avatar.jpg"><title>Novos finders no rails 4 - Jose Ustra</title><meta name=author content="Jose Ustra"><meta name=description content="Com a entrada do Rails 4 alguns m√©todos mudaram. O m√©todos &amp;lsquo;m√°gicos&amp;rsquo; que a gente conhecia como find_all_by_name foram marcados como deprecated e ser√£o removidos no Rails 4.1"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700"><link rel=stylesheet href=https://ustrajunior.com/css/theme.css><link rel=stylesheet href=https://ustrajunior.com/css/chroma.dracula.css></head><body class="font-serif antialiased bg-gray-200 border-t-4 border-blue-500"><div class="w-full p-6 md:w-2/3 md:px-0 md:mx-auto xl:w-2/5"><header class=mb-6><div class="mb-6 md:flex md:items-center"><div><a class="text-lg mb-8 inline-block" href=/pt-br>&larr; Back Home</a><h1 class="text-4xl font-bold">Novos finders no rails 4</h1><time datetime="2013-12-17 11:07:51 UTC">17 Dec 2013</time><ol class=mt-4><li class=inline-block><a class="border-none text-gray-800 text-xs bg-gray-400 hover:bg-gray-600 hover:text-white rounded-sm px-3 py-1" href=https://ustrajunior.com/tags/rails4>rails4</a></li></ol></div></div></header><article class=mb-12><p>Com a entrada do Rails 4 alguns m√©todos mudaram. O m√©todos &ldquo;m√°gicos&rdquo; que a gente conhecia como <code>find_all_by_name</code> foram marcados como deprecated e ser√£o removidos no Rails 4.1. Vamos ver alguns exemplos:</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=c1># Ao inv√©s de usar os finders din√¢micos, agora usamos o where.</span>

<span class=no>Rails</span> <span class=mi>3</span><span class=p>:</span> <span class=no>Person</span><span class=o>.</span><span class=n>find_all_by_first_name</span><span class=p>(</span><span class=s1>&#39;John&#39;</span><span class=p>)</span>
<span class=no>Rails</span> <span class=mi>4</span><span class=p>:</span> <span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span>

<span class=c1># apartir dai utilizamos podemos utilizar algumas m√©todos para filtrar mais</span>
<span class=c1># First e Last</span>
<span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>first</span>
<span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>last</span>

<span class=no>Find</span><span class=p>,</span> <span class=n>create</span><span class=p>,</span> <span class=kp>initialize</span>
<span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>first_or_create</span>
<span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>first_or_create!</span>
<span class=no>Person</span><span class=o>.</span><span class=n>where</span><span class=p>(</span><span class=ss>first_name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>first_or_initialize</span>
</code></pre></div><p>Outros dois m√©todos que foram introduzidos no Rails 4 e ajudam bastante s√£o o find_by e find_by!</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=no>Person</span><span class=o>.</span><span class=n>find_by</span><span class=p>(</span><span class=nb>name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span>
<span class=no>Person</span><span class=o>.</span><span class=n>find_by!</span><span class=p>(</span><span class=nb>name</span><span class=p>:</span> <span class=s1>&#39;John&#39;</span><span class=p>)</span>
</code></pre></div><p>Esses m√©todos s√£o equivalentes a fazer <code>Person.where(name: 'John').first</code> mas √© uma forma mais limpa de escrever. A difer√™nca de usar a ! √© que se ele n√£o achar nada ir√° retornar um erro <code>ActiveRecord::RecordNotFound</code></p></article><footer><p>&copy; 2021. Proudly made with üíï with <a href=https://gohugo.io/ target=_blank>Hugo</a> and <a href=https://tailwindcss.com/ target=_blank>TailwindCSS</a>.</p></footer></div><script async defer data-domain=ustrajunior.com src=https://analytics.ustrajunior.com/js/plausible.js></script></body></html>